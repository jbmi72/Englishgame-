<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Neon Cyborg Runner - Stable Edition</title>
    <style>
        body { margin: 0; overflow: hidden; background: #05010a; font-family: 'Segoe UI', sans-serif; }
        canvas { display: block; }
        #ui { position: absolute; inset: 0; pointer-events: none; z-index: 100; display: flex; flex-direction: column; align-items: center; color: #00f2ff; }
        .hud { width: 90%; display: flex; justify-content: space-between; padding: 20px; font-size: 22px; font-weight: bold; }
        #q-panel { margin-top: 40px; background: rgba(20, 0, 40, 0.9); border: 3px solid #ff00ff; padding: 30px; border-radius: 20px; text-align: center; pointer-events: auto; min-width: 350px; box-shadow: 0 0 30px #ff00ff44; }
        #word { font-size: 60px; color: white; text-shadow: 0 0 20px #ff00ff; margin-bottom: 20px; }
        #btns { position: absolute; bottom: 60px; display: flex; gap: 20px; pointer-events: auto; }
        .btn { background: #000; border: 2px solid #00f2ff; color: #00f2ff; padding: 15px 45px; font-size: 26px; border-radius: 50px; cursor: pointer; transition: 0.2s; font-weight: bold; }
        .btn:hover { background: #00f2ff; color: #000; box-shadow: 0 0 30px #00f2ff; transform: scale(1.1); }
    </style>
</head>
<body>

<div id="ui">
    <div class="hud">
        <div id="sc">SCORE: 0</div>
        <div id="lv">❤️❤️❤️</div>
    </div>
    <div id="q-panel">
        <div id="word">טוען...</div>
    </div>
    <div id="btns">
        <button class="btn" onclick="check(this.innerText)"></button>
        <button class="btn" onclick="check(this.innerText)"></button>
        <button class="btn" onclick="check(this.innerText)"></button>
    </div>
</div>

<canvas id="c"></canvas>

<script>
    const canvas = document.getElementById('c'), ctx = canvas.getContext('2d');
    let w, h, score = 0, lives = 3, frame = 0, speed = 1;
    let particles = [], buildings = [];

    const wordBank = [
        {h: "הזדמנות", e: "opportunity", alt: ["operation", "opposite"]},
        {h: "סביבה", e: "environment", alt: ["energy", "equipment"]},
        {h: "אחריות", e: "responsibility", alt: ["respect", "response"]},
        {h: "להעריך", e: "appreciate", alt: ["approach", "apply"]},
        {h: "משמעותי", e: "significant", alt: ["scientific", "sufficient"]}
    ];
    let currentQ = {};

    function resize() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
        buildings = [];
        for(let i=0; i<10; i++) buildings.push({x: i*300, w: 150+Math.random()*100, h: 200+Math.random()*300});
    }
    window.onresize = resize;

    function next() {
        currentQ = wordBank[Math.floor(Math.random() * wordBank.length)];
        document.getElementById('word').innerText = currentQ.h;
        let opts = [currentQ.e, ...currentQ.alt].sort(() => Math.random() - 0.5);
        document.querySelectorAll('.btn').forEach((b, i) => b.innerText = opts[i]);
    }

    function check(val) {
        if(val === currentQ.e) {
            score += 10; speed += 0.1;
            for(let i=0; i<20; i++) particles.push({x: 200, y: h-150, vx: Math.random()*10-5, vy: -Math.random()*10, l: 1});
        } else {
            lives--;
        }
        document.getElementById('sc').innerText = "SCORE: " + score;
        document.getElementById('lv').innerText = "❤️".repeat(lives);
        if(lives <= 0) location.reload(); else next();
    }

    function drawCyborg(f) {
        ctx.save();
        ctx.translate(150, h - 220 + Math.sin(f*0.2)*10);
        ctx.shadowBlur = 20; ctx.shadowColor = "#00f2ff";
        
        // גוף הסייבורג (קוד גרפי במקום תמונה)
        ctx.strokeStyle = "#00f2ff"; ctx.lineWidth = 4;
        ctx.strokeRect(0, 0, 50, 80);
        ctx.strokeRect(5, -30, 40, 30); // ראש
        ctx.fillStyle = "#00f2ff"; ctx.fillRect(15, -20, 20, 5); // עיניים
        
        // רגליים זזות
        let legAngle = Math.sin(f*0.3) * 20;
        ctx.beginPath(); ctx.moveTo(15, 80); ctx.lineTo(15 - legAngle, 120); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(35, 80); ctx.lineTo(35 + legAngle, 120); ctx.stroke();
        ctx.restore();
    }

    function loop() {
        ctx.fillStyle = "#05010a"; ctx.fillRect(0,0,w,h);

        // ציור בנייני ניאון
        buildings.forEach(b => {
            b.x -= 3 * speed;
            ctx.strokeStyle = "#ff00ff22"; ctx.strokeRect(b.x, h-b.h-140, b.w, b.h);
            ctx.fillStyle = "rgba(10, 0, 30, 0.5)"; ctx.fillRect(b.x, h-b.h-140, b.w, b.h);
            if(b.x + b.w < 0) b.x = w;
        });

        // רצפה
        ctx.strokeStyle = "#00f2ff"; ctx.lineWidth = 4;
        ctx.beginPath(); ctx.moveTo(0, h-140); ctx.lineTo(w, h-140); ctx.stroke();

        // חלקיקים
        particles.forEach((p, i) => {
            p.x += p.vx - 3; p.y += p.vy; p.l -= 0.02;
            ctx.fillStyle = `rgba(0, 242, 255, ${p.l})`; ctx.fillRect(p.x, p.y, 4, 4);
            if(p.l <= 0) particles.splice(i, 1);
        });

        drawCyborg(frame);
        frame++;
        requestAnimationFrame(loop);
    }

    resize(); next(); loop();
</script>
</body>
</html>
